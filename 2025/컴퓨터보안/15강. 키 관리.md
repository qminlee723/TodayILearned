# 15강. 키 관리

## 1. 대칭키 암호의 키 관리

### 대칭키 암호에서 비밀키 공유

### Diffie-Hellman Key Exchange(DHKE) 프로토콜

- 이산대수 문제 기반해 비밀키를 안전하게 공유하는 방법

- 큰 소수 p와 양의 정수 g

- p, g는 제3자가 알아도 됨



### 중간자 공격(MITM: Man In The Middle attack)

- DHKE 프로토콜을 이용한 비밀키 공유 무력화



## 2. 공개키 암호의 키 관리

### 공개키 암호에서 공개키 공개

### 공개선언

- 공개키를 공개적으로 선언
  - 자신의 홈페이지에 올려두거나, 
  - 요청자에게 직접 보냄



### 신뢰받는 센터

- 모든 사람의 공개키를 신뢰받는 센터가 관리
  - 센터의 디렉터리에 사람들이 공개키를 올림
  - 센터는 공개키에 대한 모든 질의에 응답



### 통제된 신뢰받는 센터

- 공개키를 분배할 때 센터의 서명을 붙임
  - 공개키 요청시 타임슽매프를 같이 받음
  - 타임스탬프에 대한 센터의 서명을 공개키와 함께 보냄



### 인증기관(CA)

- 공개키 인증서를 만들어 분배
  - 인증서: 개인의 공개키에 인증기관의 서명을 붙인 것
  - 사람들의 공개키를 인증서로 변환해 디렉터리에 올림



## 3. 공개키 기반 구조(PKI)

### 공개키 기반 구조

- Public Key Infrastructure 
- X.509에 기초해 인증서 생선, 분배, 인증 및 폐지까지 관리하는 체계
- 공개키 암호를 통해 암호화 및 전자서명을 제공하는 복합적인 보안 시스템
- 제공 서비스: 기밀성, 무결성, 접근제어, 인증, 부인방지

- 응용분야
  - 은행 지불결제 시스템, 기관 간 전자문서 교환, 병원 의무기록에 대한 서명 등



### X.509

- 표준 인증서 형식
  - 공통 규격



### PKI의 구성요소

- 사용자
  - 전자서명 생성 및 검증, 암 복호화 수행
- 인증기관
  - 공개키에 대한 인증서 발급
- 등록기관
  - 인증서 신청시 신분 및 소속 확인
- 디렉터리
  - 인증서, 사용자 관련 정보, 상호인증서 쌍, 인증서 취소 목록 등을 저장 및 검색하는 장소



### PKI의 동작원리

![스크린샷 2025-06-12 오후 11.48.32](/Users/ialex/Desktop/TodayILearned/2025/컴퓨터보안/assets/스크린샷 2025-06-12 오후 11.48.32.png)



### PKI의 관리대상

- 인증서
  - PKI의 핵심: 인증서 관리 서비스
  - 인증서 발행, 취소, 공표, 보관
  - 정책 수립 및 승인
- 상호인증서 쌍
  - 한 도메인이나 서로 다른 도메인의 인증기관 사이에 발행하는 인증서의 쌍
    - 순방향 인증서
      - 인증기관 X에 대해 다른 인증기관에서 생성
    - 역방향 인증서
      - 인증기관 X가 다른 인증기관에 생성
  - 상호인증서를 사용해 인증경로 단축
- 인증서 취소목록(CRL)
  - Certificate Revocation List
  - 효력이 상실된 인증서에 대한 목록
  - 유효기간 만기 전에 인증서 효력이 상실되는 경우
    - 개인키가 노출된 경우
    - 소유자가 다른 도메인으로 옮김



### PKI의 신뢰 구성

- PKI에서 신뢰는 인증경로를 통해 전달됨
- 전자서명 검증 과정
  - 검증자는 자신이 신뢰하는 인증기관의 공개키만 알고있음
  - 인증기관의 공개키를 이용해 인증경로를 검증함으로써 서명자의 공개키 획득
  - 획득한 공개키는 무결성 보장, 이를 이용해 서명 검증

- PKI의 구성 형태
  - 계층적 구성, 네트워크 구성



### 계층적 구성

- 상위 CA가 하위 CA에 인증서 발행
- 루트 CA의 공개키는 모든 사람에게 알려짐



### 네트워크 구성

- CA가 독립적으로 존재하며 서로를 상호인증
- 사용자는 자신의 인증서를 발행한 CA의 공개키만 앎



