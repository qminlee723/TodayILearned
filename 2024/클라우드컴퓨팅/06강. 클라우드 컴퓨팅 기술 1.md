# 06강. 클라우드 컴퓨팅 기술 1

## 1. 가상화 기술의 이해

### 가상화 기술 개요

- S/W 적으로 애플리케이션, 서버, 스토리지, 네트워크와 같은 IT 리소스를 논리적으로 분할/통합하여 리소스의 이용률과 가용성을 높이는 기술
  - 물리적 IT 리소스를 가상의 IT 리소스로 전환
  - 가상화 기술을 활용하여 하나의 서버로 여러 실행 환경 구성

- 가상화 기술의 장점
  - 물리적 리소스의 소유 비용을 감축
  - 간편한 유지보수



### 가상화 소프트웨어의 역할

- CPU, GPU, 메모리, 스토리지와 같은 H/W적 리소스와 OS, 런타임 등의 S/W 적 리소스를 가상화하여 소프트웨어 플랫폼 역할을 함
  - 사용자의 요청에 탄력적으로 리소스를 제공할 수 있는 클라우드 컴퓨팅에 적합한 기술
- 가상 머신(Virtual Machine)
  - 가상화 기술을 통해 나눠진 기초직 논리적 단위의 머신
  - H/W 리소스를 OS가 아닌 VM 수준에서 제어하기 때문에, 하나의 H/W 상에서 각기 다른 종류의 OS 실행 가능



### 가상 머신의 구조

<img src="./assets/Screenshot 2024-10-07 at 11.17.30 PM.png" alt="Screenshot 2024-10-07 at 11.17.30 PM" style="zoom:50%;" />





### 가상화 기술의 역할

- 파티셔닝: 하나의 물리적 머신을 분할/분배
- 캡슐화: HW 제어에 요구되는 복잡한 기능을 감추고, 간단한 인터페이스를 제공(폴더와 파일로 가상 머신을 구조화)
- 격리: 장애 및 보안 위험 발생 시 캡슐화되어 있는 가상 머신 분리
- H/W 독립화: 하나의 물리적 머신 안에서 가상 머신을 독립적으로 가동





## 2. 서버 가상화

### 서버 가상화의 이해

- 1960년대부터 다수의 IT 리소스 관리와 운영의 어려움을 보완하기 위한 목적으로, 연구 및 개발이 이루어짐
- 컴퓨터 시스템에서 내부적으로 가상의 기능과 구성요소를 만들어 내기 위해 적용

- 서버 가상화의 분류
  - 호스트 가상화 방식
  - 하이퍼바이저 가상화 방식
  - 컨테이너 방식



### 호스트 가상화 방식

<img src="./assets/Screenshot 2024-10-07 at 11.21.04 PM.png" alt="Screenshot 2024-10-07 at 11.21.04 PM" style="zoom:50%;" />

- HW에 설치된 호스트 OS 상에 가상화 SW가 설치되고, 그 위에 SW 실행을 위한 게스트 OS가 구동되는 방식
  - 호스트OS: 직접적인 하드웨어 관리
  - 게스트OS:  가상 머신에게 소프트웨어 실행환경 제공
- 2개의 운영체제를 실행해야 하므로, 상대적으로 저속의 실행환경이 만들어질수밖에 없는 한계 존재
  - 따라서 현재 거의 이용되지 않음
- 호스트 가상화 소프트웨어 종류
  - VMWare Workstation
  - Microsoft Virtual Server
  - Oracle Virtual Box

- 호스트 가상화의 장점
  - 게스트 OS가 HW 리소스에 접근하는 것을 제어하고 동기화하기 때문에, 호스트OS에 제약이 없음
- 호스트 가상화의 단점
  - 호스트 OS와 게스트OS의 공존으로 필요이상의 CPU, 디스크, 메모리 사용의 오버헤드 발생



### 하이퍼바이저 가상화 방식

<img src="./assets/Screenshot 2024-10-07 at 11.24.12 PM.png" alt="Screenshot 2024-10-07 at 11.24.12 PM" style="zoom:50%;" />

- 특정 OS에 의존하지 않고, 하드웨어에 직접 설치되는 구조의 가상화 구조
  - 오버헤드 비용이 적음
  - 하드웨어를 직접 관리하여 리소스 관리가 유연함
  - 호스트 가상화 방식 단점 극복을 위해 고안됨

- 하이퍼바이저 소프트웨어 종류
  - VMWare ESXi(가장 대표적)
  - Microsoft Hyper-V
  - Citrix XenServer



#### 하이퍼바이저 가상화 방식 분류

- 전가상화(full-virtualization)

  <img src="./assets/Screenshot 2024-10-07 at 11.25.44 PM.png" alt="Screenshot 2024-10-07 at 11.25.44 PM" style="zoom:50%;" />

  - H/W를 완전히 가상화 하는 방식
  - 관리용 가상 머신 DOM0(zero)을 통해 게스트 OS들의 커널 요청을 번역하여 하드웨어로 전달
  - 게스트 OS가 각자 너무 많은 요청을 했을 때 병목현상으로 인한 성능 저하 발생 가능

- 반가상화(para-virtualization)

  <img src="./assets/Screenshot 2024-10-07 at 11.27.22 PM.png" alt="Screenshot 2024-10-07 at 11.27.22 PM" style="zoom:50%;" />

  - 게스트 OS가 하이퍼콜을 요청할 수 있도록 커널이 수정된 형태
    - 병목현상이 생기지 않으므로 전가상화 방식에 비해 속도가 향상됨
  - 리눅스와 같은 오픈소스 OS 이외에는 반가상화가 어렵다는 한계를 가짐
    - 커널이 수정이 되어야 하기 때문에



### 컨테이너 가상화 방식

<img src="./assets/Screenshot 2024-10-07 at 11.29.45 PM.png" alt="Screenshot 2024-10-07 at 11.29.45 PM" style="zoom:50%;" />

- 컨테이너
  - 애플리케이션을 동작시키는데 필요한 라이브러리 및 종속 리소스를 함께 패키지로 묶어 생성한 호스트 OS 상의 논리적인 구역
  - 운영체제가 하나만 실행중임
    - 속도가 빠름
- 컨테이너의 장점
  - 게스트OS의 실행에 소요되는 오버헤드가 없어 상대적으로 고속으로 작동
  - 애플리케이션에서 사용하는 미들웨어와 라이브러리의 버전이 상이하여 발생하는 문제를 컨테이너를 통한 격리로 해결



#### Docker

<img src="./assets/Screenshot 2024-10-07 at 11.37.31 PM.png" alt="Screenshot 2024-10-07 at 11.37.31 PM" style="zoom:50%;" />

- 대표적인 오픈소스 컨테이너 엔진(런타임)
- 반가상화보다 더 경량화된 방식을 사용하는 리눅스 컨테이너를 기반으로 이미지 생성과 배포에 특화



#### Kubernetes

<img src="./assets/Screenshot 2024-10-07 at 11.38.30 PM.png" alt="Screenshot 2024-10-07 at 11.38.30 PM" style="zoom:50%;" />

- 서비스 오케스트레이션을 위한 도구
- 컨테이너 분산 배치, 상태 관리 및 구동 환경을 관리해 주는 도구
  - Kubernetes v1.2(2022년 5월)부터 도커 지원 중단