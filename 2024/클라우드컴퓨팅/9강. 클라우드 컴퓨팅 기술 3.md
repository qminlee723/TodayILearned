# 9강. 클라우드 컴퓨팅 기술 3

## 1. 스토리지 기술 및 다중화

### 스토리지 시스템의 요구사항

- 단순 데이터 저장 및 접근을 지원하는 장치에서 **처리** 및 **공유** 관점에서 새로운 기능을 갖춘 장치로 진화
  - 대용량 및 고속 데이터 처리
  - 효율적인 데이터 공유
    - 공유 > 분배(할당) > 보안 강화
  - 확장성, 사용성, 유연성
  - 다양한 접근 형식



### 스토리지 논리적 접근 단위

- 전통적 테스트 및 바이너리 데이터 외 **비정형 데이터** 증가에 따라 형태별 데이터를 효과적으로 관리할 수 있는 장치 메커니즘 마련
  - 파일: 데이터 스트림이 파일로 저장되어 폴더로 구조화되는 단위
  - 블록: 스토리지 하드웨어에 가장 가까운 수준의 최소 데이터 단위
  - 데이터 세트: 데이터가 테이블, 단락, 레코드와 같은 형식으로 구성된 단위
  - 오브젝트: 데이터가 객체 단위로 구조화되는 스토리지로, 데이터 및 메타데이터로 구성된 오브젝트에 고유 ID를 부여



### 스토리지 다중화 및 확장 기술

- 단일 디스크로 처리할 수 없는 고용량 데이터를 처리하기 위해 디스크를 논리적으로 묶어 서버와 연결하여 사용하는 스토리지 구성 방식
  - RAID(Redundant Arrays of Independent Disks)
  - NAS(Network Attached Storage)
  - SAN(Storage)



### RAID(Redundant Arrays of Independent Disks)

- 다수의 디스크를 병렬적으로 구동하는 동시에 시스템의 신뢰성을 향상시키는 기법
- RAID의 기능
  - 중복된 데이터의 분산 저장
  - 디스크 장애 발생 시 손실된 데이터 복구가 가능
    - 미러링: 쓰기 연산 발생시 분산되어 있는 모든 물리 디스크에 기록
  - 읽기 요청이 다수의 디스크가 나누어 처리함으로써 읽기 속도를 향상(병렬성 향상)



#### RAID 0과 1

- RAID 0: 스트라이핑

  - 여러 데이터가 여러 디스크에 나눠 저장될 수 있도록 하는 기술

  ![Screenshot 2024-10-31 at 12.20.40 AM](./assets/Screenshot 2024-10-31 at 12.20.40 AM.png)

- RAID 1: 미러링

  - 두 개의 디스크가 완전히 동일한 데이터를 저장할 수 있도록 하는 기술
  - 0보다는 안전성이 대폭 향상됨

  ![Screenshot 2024-10-31 at 12.21.03 AM](./assets/Screenshot 2024-10-31 at 12.21.03 AM.png)



#### RAID 3과 4

- 패리티 기반 스트라이핑
  - 에러의 검출 및 정정을 위한 별도의 패리티 디스크 유지
  - 바이트 단위(RAID 3), 블록 단위(RAID 4)

- RAID 3

  ![Screenshot 2024-10-31 at 12.23.08 AM](./assets/Screenshot 2024-10-31 at 12.23.08 AM.png)

- RAID 4

  ![Screenshot 2024-10-31 at 12.23.15 AM](./assets/Screenshot 2024-10-31 at 12.23.15 AM.png)



### NAS(Network Attached Storage)

![Screenshot 2024-10-31 at 12.24.42 AM](./assets/Screenshot 2024-10-31 at 12.24.42 AM.png)

- **네트워크 스위치**를 통해 데이터를 송수신하는 저장장치
  - 중계 역할을 하는 전용 파일 서버가 필요
  - 전용 파일 서버에서 파일의 일관성 및 무결성을 유지하며 여러 서버에서 공유가 가능
  - 단점: 대량의 I/O가 발생할 경우 지연율이 증가하여 DB와 같은 서비스에 부적합
    - 보고서, 이미지, 텍스트 저장을 위한 용도로 사용되는 서버임



### SAN(Storage Area Network)

![Screenshot 2024-10-31 at 12.25.48 AM](./assets/Screenshot 2024-10-31 at 12.25.48 AM.png)

- 여러 종류의 데이터 저장 장치와 데이터를 사용할 서버를 **파이버 채널**을 사용하여 파이버 채널 스위치로 연결한 고속 데이터 네트워크
  - 고속의 I/O 채널 제공
  - 이기종 서버 환경 지원 한계
  - 굉장히 고가... 광섬유 사용



### 스토리지 가상화 기술의 이해

-  RAID, NAS, SAN의 수백 수천개의 디스크를 관리하고 유지하는데 많은 인력과 비용이 요구됨
- 물리적 스토리지 시스템과 서버 사이에 스토리지 가상화 소프트웨어 층을 추가
- 애플리케이션 구동 시 필요한 데이터의 위치에 대한 드라이브, 파티션, 스토리지 인식 없이 사용이 가능

- 디바이스의 크기, 특징, 제조사 등 이기종 디바이스의 특징 고려 없이 단일 스토리지 계층으로 그룹화하여 운용하여 유연한 구조



### 스토리지 가상화 구조

![Screenshot 2024-10-31 at 12.28.31 AM](./assets/Screenshot 2024-10-31 at 12.28.31 AM.png)

- 여러 스토리지 디바이스를 단일 리소스로 인식하고 프로비저닝
- 가용성 확보 및 무중단 서비스 기능 지원



### 스토리지 가상화 기술

- 디스크 컨트롤러 가상화
  - 스토리지 서브 시스템 또는 컨트롤러를 **파티션**으로 나누어 여러 개의 컨트롤러가 있는 것 처럼 가상화
- 네트워크 기반 스토리지 블록 가상화
  - 서로 다른 스토리지 컨트롤러부터 유휴 디스크 공간을 모아 하나의 큰 디스크 풀을 만들어 제공하는 방식
- 소프트웨어 정의 스토리지
  - 하드웨어와 스토리지 소프트웨어를 분리하는 스토리지 아키텍처
  - 하드웨어에 대한 소프트웨어의 종속적을 제거하여, 사용자가 필요에 따라 스토리지를 가변적으로 확장





## 2. 클라우드 서비스 무정지 기술

### 무정지 기술의 이해

- 대량의 물리 서버 운용이 필요한 클라우드 서비스가 중단 없이 장애를 대응할 수 있도록 사용되는 기술
- 클라우드 서비스 장애의 원인
  - 장비 노후로 인한 무응답
  - 물리적 고장
- 물리 서버가 장애 방지 또는 장애 조치가 되어있지 않은 경우, 장애가 발생 시 SPOF 발생
  - SPOF(Single Point of failure): 시스템 구성 요소 중 정상적으로 동작하지 않으면 시스템 전체가 중단되는 지점 또는 장치



### 무정지 관련 기술

- 장애 방지 시스템(Fault tolerance system)
  - 시스템의 일부의 결함, 고장이 발생해도 정상적 혹은 부분적으로 기능을 수행할 수 있는 시스템
- 장애 조치 시스템(Failover system)
  - 컴퓨터 서버, 시스템, 네트워크 등에서 이상이 생겼을 때 예비 시스템으로 자동으로 전환되는 기능을 수행하는 시스템



### 동적 장애 감지

- 물리적 리소스에 발생하는 장애
  - 메모리 에러, 디스크 에러, CPU 에러
  - 장비 노후로 인한 시스템 크래시
- 방대한 물리 장비들이 배치되어 있는 데이터센터에 장애 발생 시 매번 원인을 찾고 문제 해결하는 것은 비효율적
- 클라우드 모니터
  - 가상 서버, 네트워크 장비 등의 클라우드 리소스의 사용량과 이벤트(장애)가 발생하는지를 감시
  - 장애 발생 시 장애 조치



### 장애 감지 기법의 예

- 하트비트 모니터링(헬스 체크) (동적 장애 감지)

  ![Screenshot 2024-10-31 at 12.34.03 AM](./assets/Screenshot 2024-10-31 at 12.34.03 AM.png)

  

### 클라우드 서비스에서의 장애 조치 시스템

![Screenshot 2024-10-31 at 12.35.03 AM](./assets/Screenshot 2024-10-31 at 12.35.03 AM.png)

- 장애 이벤트 발생 시 운영중인 가상 서버는 새로운 물리 서버의 **하이퍼바이저**에게 새 가상 서버 생성 요청
- 가상 서버 생성 완료 시 운영중인 가상 서버를 마이그레이션
- 장애 조치를 강하게 하는 것을 **에스컬레이션**이라고 함



